Parsed test spec with 2 sessions

starting permutation: s1-begin s1-update-node-1 s2-update-node-2 s1-commit s1-show-nodes
nodeid         nodename       nodeport

22             <host>      xxxxx
23             <host>      xxxxx
step s1-begin:
	BEGIN;

step s1-update-node-1:
    SELECT 1 FROM master_update_node(
        (select nodeid from pg_dist_node where nodeport = xxxxx),
        '<host>',
        58637);

?column?

1
step s2-update-node-2:
    SELECT 1 FROM master_update_node(
        (select nodeid from pg_dist_node where nodeport = xxxxx),
        '<host>',
        58638);
 <waiting ...>
step s1-commit:
	COMMIT;

step s2-update-node-2: <... completed>
?column?

1
step s1-show-nodes:
    SELECT nodeid, nodename, nodeport, isactive
      FROM pg_dist_node
  ORDER BY nodename, nodeport;

nodeid         nodename       nodeport       isactive

22             <host>      58637          t
23             <host>      58638          t
nodeid         nodename       nodeport


starting permutation: s1-begin s1-update-node-1 s2-begin s2-update-node-1 s1-commit s2-abort s1-show-nodes
nodeid         nodename       nodeport

24             <host>      xxxxx
25             <host>      xxxxx
step s1-begin:
	BEGIN;

step s1-update-node-1:
    SELECT 1 FROM master_update_node(
        (select nodeid from pg_dist_node where nodeport = xxxxx),
        '<host>',
        58637);

?column?

1
step s2-begin:
	BEGIN;

step s2-update-node-1:
    SELECT 1 FROM master_update_node(
        (select nodeid from pg_dist_node where nodeport = xxxxx),
        '<host>',
        58637);
 <waiting ...>
step s1-commit:
	COMMIT;

step s2-update-node-1: <... completed>
?column?

1
step s2-abort:
	ABORT;

step s1-show-nodes:
    SELECT nodeid, nodename, nodeport, isactive
      FROM pg_dist_node
  ORDER BY nodename, nodeport;

nodeid         nodename       nodeport       isactive

25             <host>      xxxxx          t
24             <host>      58637          t
nodeid         nodename       nodeport


starting permutation: s1-begin s1-update-node-1 s2-start-metadata-sync-node-2 s1-commit s2-verify-metadata
nodeid         nodename       nodeport

26             <host>      xxxxx
27             <host>      xxxxx
step s1-begin:
	BEGIN;

step s1-update-node-1:
    SELECT 1 FROM master_update_node(
        (select nodeid from pg_dist_node where nodeport = xxxxx),
        '<host>',
        58637);

?column?

1
step s2-start-metadata-sync-node-2:
    SELECT start_metadata_sync_to_node('<host>', xxxxx);
 <waiting ...>
step s1-commit:
	COMMIT;

step s2-start-metadata-sync-node-2: <... completed>
start_metadata_sync_to_node


step s2-verify-metadata:
    SELECT nodeid, groupid, nodename, nodeport FROM pg_dist_node ORDER BY nodeid;
    SELECT master_run_on_worker(
        ARRAY['<host>'], ARRAY[xxxxx],
        ARRAY['SELECT jsonb_agg(ROW(nodeid, groupid, nodename, nodeport) ORDER BY nodeid) FROM  pg_dist_node'],
        false);

nodeid         groupid        nodename       nodeport

26             26             <host>      58637
27             27             <host>      xxxxx
master_run_on_worker

(<host>,xxxxx,t,"[{""f1"": 26, ""f2"": 26, ""f3"": ""<host>"", ""f4"": 58637}, {""f1"": 27, ""f2"": 27, ""f3"": ""<host>"", ""f4"": xxxxx}]")
nodeid         nodename       nodeport

